{"level":"info","ts":1764645995.9411418,"caller":"storage/manager.go:48","msg":"Created storage directory","path":"/var/losslesscut/uploads"}
{"level":"info","ts":1764645995.9424086,"caller":"storage/manager.go:48","msg":"Created storage directory","path":"/var/losslesscut/projects"}
{"level":"info","ts":1764645995.942577,"caller":"storage/manager.go:48","msg":"Created storage directory","path":"/var/losslesscut/outputs"}
{"level":"info","ts":1764645995.9426222,"caller":"storage/manager.go:48","msg":"Created storage directory","path":"/var/losslesscut/temp"}
{"level":"info","ts":1764645995.9426546,"caller":"storage/manager.go:48","msg":"Created storage directory","path":"/var/losslesscut/downloads"}
{"level":"info","ts":1764645995.9426782,"caller":"storage/manager.go:48","msg":"Created storage directory","path":"/var/losslesscut/videos"}
{"level":"info","ts":1764645995.942699,"caller":"storage/manager.go:48","msg":"Created storage directory","path":"/var/losslesscut/waveforms"}
{"level":"info","ts":1764645995.9427402,"caller":"storage/manager.go:48","msg":"Created storage directory","path":"/var/losslesscut/screenshots"}
[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:	export GIN_MODE=release
 - using code:	gin.SetMode(gin.ReleaseMode)

[GIN-debug] GET    /health                   --> github.com/mifi/lossless-cut/backend/internal/api.NewRouter.func1 (4 handlers)
[GIN-debug] GET    /api/system/info          --> github.com/mifi/lossless-cut/backend/internal/api/handlers.(*SystemHandler).Info-fm (4 handlers)
[GIN-debug] GET    /api/system/stats         --> github.com/mifi/lossless-cut/backend/internal/api/handlers.(*SystemHandler).GetStats-fm (4 handlers)
[GIN-debug] DELETE /api/system/clear-all     --> github.com/mifi/lossless-cut/backend/internal/api/handlers.(*SystemHandler).ClearAll-fm (4 handlers)
[GIN-debug] POST   /api/system/session/start --> github.com/mifi/lossless-cut/backend/internal/api/handlers.(*SystemHandler).SessionStart-fm (4 handlers)
[GIN-debug] POST   /api/system/session/heartbeat --> github.com/mifi/lossless-cut/backend/internal/api/handlers.(*SystemHandler).SessionHeartbeat-fm (4 handlers)
[GIN-debug] POST   /api/system/session/end   --> github.com/mifi/lossless-cut/backend/internal/api/handlers.(*SystemHandler).SessionEnd-fm (4 handlers)
[GIN-debug] POST   /api/projects             --> github.com/mifi/lossless-cut/backend/internal/api/handlers.(*ProjectHandler).Create-fm (4 handlers)
[GIN-debug] GET    /api/projects             --> github.com/mifi/lossless-cut/backend/internal/api/handlers.(*ProjectHandler).List-fm (4 handlers)
[GIN-debug] GET    /api/projects/:id         --> github.com/mifi/lossless-cut/backend/internal/api/handlers.(*ProjectHandler).Get-fm (4 handlers)
[GIN-debug] PUT    /api/projects/:id         --> github.com/mifi/lossless-cut/backend/internal/api/handlers.(*ProjectHandler).Update-fm (4 handlers)
[GIN-debug] DELETE /api/projects/:id         --> github.com/mifi/lossless-cut/backend/internal/api/handlers.(*ProjectHandler).Delete-fm (4 handlers)
[GIN-debug] POST   /api/projects/:id/export  --> github.com/mifi/lossless-cut/backend/internal/api/handlers.(*ProjectHandler).Export-fm (4 handlers)
[GIN-debug] POST   /api/projects/:id/segments --> github.com/mifi/lossless-cut/backend/internal/api/handlers.(*ProjectHandler).AddSegment-fm (4 handlers)
[GIN-debug] PUT    /api/projects/:id/segments/:segmentId --> github.com/mifi/lossless-cut/backend/internal/api/handlers.(*ProjectHandler).UpdateSegment-fm (4 handlers)
[GIN-debug] DELETE /api/projects/:id/segments/:segmentId --> github.com/mifi/lossless-cut/backend/internal/api/handlers.(*ProjectHandler).DeleteSegment-fm (4 handlers)
[GIN-debug] POST   /api/videos/upload        --> github.com/mifi/lossless-cut/backend/internal/api/handlers.(*VideoHandler).Upload-fm (4 handlers)
[GIN-debug] POST   /api/videos/download      --> github.com/mifi/lossless-cut/backend/internal/api/handlers.(*VideoHandler).Download-fm (4 handlers)
[GIN-debug] GET    /api/videos/:id/stream    --> github.com/mifi/lossless-cut/backend/internal/api/handlers.(*VideoHandler).Stream-fm (4 handlers)
[GIN-debug] GET    /api/videos/:id/waveform  --> github.com/mifi/lossless-cut/backend/internal/api/handlers.(*VideoHandler).Waveform-fm (4 handlers)
[GIN-debug] POST   /api/videos/:id/screenshot --> github.com/mifi/lossless-cut/backend/internal/api/handlers.(*VideoHandler).Screenshot-fm (4 handlers)
[GIN-debug] DELETE /api/videos/:id           --> github.com/mifi/lossless-cut/backend/internal/api/handlers.(*VideoHandler).Delete-fm (4 handlers)
[GIN-debug] GET    /api/screenshots/:filename --> github.com/mifi/lossless-cut/backend/internal/api.NewRouter.func2 (4 handlers)
[GIN-debug] POST   /api/downloads            --> github.com/mifi/lossless-cut/backend/internal/api/handlers.(*DownloadHandler).Start-fm (4 handlers)
[GIN-debug] GET    /api/downloads            --> github.com/mifi/lossless-cut/backend/internal/api/handlers.(*DownloadHandler).List-fm (4 handlers)
[GIN-debug] DELETE /api/downloads            --> github.com/mifi/lossless-cut/backend/internal/api/handlers.(*DownloadHandler).ClearAll-fm (4 handlers)
[GIN-debug] GET    /api/downloads/:id        --> github.com/mifi/lossless-cut/backend/internal/api/handlers.(*DownloadHandler).Get-fm (4 handlers)
[GIN-debug] POST   /api/downloads/:id/cancel --> github.com/mifi/lossless-cut/backend/internal/api/handlers.(*DownloadHandler).Cancel-fm (4 handlers)
[GIN-debug] GET    /api/operations/:id       --> github.com/mifi/lossless-cut/backend/internal/api/handlers.(*OperationHandler).GetStatus-fm (4 handlers)
[GIN-debug] GET    /api/outputs/:filename    --> github.com/mifi/lossless-cut/backend/internal/api.NewRouter.func3 (4 handlers)
[GIN-debug] GET    /assets/*filepath         --> github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (4 handlers)
[GIN-debug] HEAD   /assets/*filepath         --> github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (4 handlers)
[GIN-debug] GET    /                         --> github.com/mifi/lossless-cut/backend/internal/api.NewRouter.(*RouterGroup).StaticFile.func6 (4 handlers)
[GIN-debug] HEAD   /                         --> github.com/mifi/lossless-cut/backend/internal/api.NewRouter.(*RouterGroup).StaticFile.func6 (4 handlers)
[GIN-debug] GET    /index.html               --> github.com/mifi/lossless-cut/backend/internal/api.NewRouter.(*RouterGroup).StaticFile.func7 (4 handlers)
[GIN-debug] HEAD   /index.html               --> github.com/mifi/lossless-cut/backend/internal/api.NewRouter.(*RouterGroup).StaticFile.func7 (4 handlers)
{"level":"info","ts":1764645995.9435573,"caller":"server/main.go:65","msg":"Starting LosslessCut server","address":"0.0.0.0:8080","storage":"/var/losslesscut"}
[GIN-debug] [WARNING] You trusted all proxies, this is NOT safe. We recommend you to set a value.
Please check https://pkg.go.dev/github.com/gin-gonic/gin#readme-don-t-trust-all-proxies for details.
[GIN-debug] Listening and serving HTTP on 0.0.0.0:8080
{"level":"info","ts":1764646000.7488785,"caller":"middleware/logger.go:21","msg":"HTTP request","method":"POST","path":"/api/system/session/heartbeat","query":"","status":200,"latency":0.000180222,"ip":"38.224.245.23"}
{"level":"info","ts":1764646000.8341587,"caller":"middleware/logger.go:21","msg":"HTTP request","method":"GET","path":"/api/downloads","query":"","status":200,"latency":0.000193843,"ip":"38.224.245.23"}
{"level":"info","ts":1764646000.9197261,"caller":"middleware/logger.go:21","msg":"HTTP request","method":"GET","path":"/api/system/stats","query":"","status":200,"latency":0.000112108,"ip":"38.224.245.23"}
{"level":"info","ts":1764646001.0041733,"caller":"middleware/logger.go:21","msg":"HTTP request","method":"POST","path":"/api/system/session/heartbeat","query":"","status":200,"latency":0.000069865,"ip":"38.224.245.23"}
{"level":"info","ts":1764646009.2501185,"caller":"middleware/logger.go:21","msg":"HTTP request","method":"GET","path":"/api/system/info","query":"","status":200,"latency":0.000041863,"ip":"::1"}
{"level":"info","ts":1764646030.3139343,"caller":"middleware/logger.go:21","msg":"HTTP request","method":"POST","path":"/api/system/session/end","query":"","status":200,"latency":0.000080801,"ip":"38.224.245.23"}
{"level":"info","ts":1764646030.4040067,"caller":"middleware/logger.go:21","msg":"HTTP request","method":"GET","path":"/","query":"","status":304,"latency":0.000088463,"ip":"38.224.245.23"}
{"level":"info","ts":1764646030.5344427,"caller":"middleware/logger.go:21","msg":"HTTP request","method":"POST","path":"/api/system/session/end","query":"","status":200,"latency":0.000062494,"ip":"38.224.245.23"}
{"level":"info","ts":1764646030.5813038,"caller":"handlers/system.go:122","msg":"Session started","sessionId":"sess_p7kxibmvf_1764646029731","autoClean":true}
{"level":"info","ts":1764646030.5813951,"caller":"middleware/logger.go:21","msg":"HTTP request","method":"POST","path":"/api/system/session/start","query":"","status":200,"latency":0.000167391,"ip":"38.224.245.23"}
{"level":"info","ts":1764646030.7068877,"caller":"handlers/system.go:122","msg":"Session started","sessionId":"sess_p7kxibmvf_1764646029731","autoClean":true}
{"level":"info","ts":1764646030.7069519,"caller":"middleware/logger.go:21","msg":"HTTP request","method":"POST","path":"/api/system/session/start","query":"","status":200,"latency":0.000129125,"ip":"38.224.245.23"}
{"level":"info","ts":1764646030.7121594,"caller":"middleware/logger.go:21","msg":"HTTP request","method":"GET","path":"/api/system/stats","query":"","status":200,"latency":0.000064066,"ip":"38.224.245.23"}
{"level":"info","ts":1764646035.112381,"caller":"middleware/logger.go:21","msg":"HTTP request","method":"GET","path":"/api/downloads","query":"","status":200,"latency":0.000064328,"ip":"38.224.245.23"}
{"level":"info","ts":1764646060.6698432,"caller":"middleware/logger.go:21","msg":"HTTP request","method":"POST","path":"/api/system/session/heartbeat","query":"","status":200,"latency":0.000069073,"ip":"38.224.245.23"}
{"level":"info","ts":1764646069.6228557,"caller":"ffmpeg/probe.go:113","msg":"Executing FFprobe","file":"/var/losslesscut/uploads/ece53405-4bd0-4ba6-9918-39c080b14e9f.mp4"}
{"level":"info","ts":1764646069.6940212,"caller":"ffmpeg/probe.go:130","msg":"FFprobe completed successfully","format":"mov,mp4,m4a,3gp,3g2,mj2","streams":1}
{"level":"info","ts":1764646069.6945438,"caller":"services/video_service.go:83","msg":"Created video from upload","id":"df1eef35-f669-4441-a05b-80d88afa5f0a","filename":"9a7c40c8-3087-48fe-bc3c-d1af37c37ac9.mp4","duration":5.041667,"format":"mov,mp4,m4a,3gp,3g2,mj2"}
{"level":"info","ts":1764646069.6945755,"caller":"handlers/video.go:67","msg":"Video uploaded successfully","id":"df1eef35-f669-4441-a05b-80d88afa5f0a","filename":"9a7c40c8-3087-48fe-bc3c-d1af37c37ac9.mp4","size":5753597}
{"level":"info","ts":1764646069.69462,"caller":"middleware/logger.go:21","msg":"HTTP request","method":"POST","path":"/api/videos/upload","query":"","status":201,"latency":23.917025293,"ip":"38.224.245.23"}
{"level":"info","ts":1764646069.787461,"caller":"services/project_service.go:42","msg":"Created project","id":"5d628900-6fcd-4dd7-ac3b-8657780b9954","name":"9a7c40c8-3087-48fe-bc3c-d1af37c37ac9.mp4"}
{"level":"info","ts":1764646069.787553,"caller":"middleware/logger.go:21","msg":"HTTP request","method":"POST","path":"/api/projects","query":"","status":201,"latency":0.000368285,"ip":"38.224.245.23"}
{"level":"info","ts":1764646069.99093,"caller":"middleware/logger.go:21","msg":"HTTP request","method":"GET","path":"/api/videos/df1eef35-f669-4441-a05b-80d88afa5f0a/stream","query":"","status":206,"latency":0.000212219,"ip":"38.224.245.23"}
{"level":"info","ts":1764646069.9934592,"caller":"middleware/logger.go:21","msg":"HTTP request","method":"GET","path":"/api/videos/df1eef35-f669-4441-a05b-80d88afa5f0a/stream","query":"","status":206,"latency":0.174702307,"ip":"38.224.245.23"}
{"level":"info","ts":1764646070.3415773,"caller":"handlers/video.go:310","msg":"Generating waveform","videoId":"df1eef35-f669-4441-a05b-80d88afa5f0a"}
{"level":"info","ts":1764646070.341657,"caller":"ffmpeg/executor.go:58","msg":"Executing FFmpeg","command":"/usr/bin/ffmpeg -hide_banner -i /var/losslesscut/uploads/ece53405-4bd0-4ba6-9918-39c080b14e9f.mp4 -filter_complex showwavespic=s=1920x120:colors=#667eea|#667eea:scale=sqrt:split_channels=0 -frames:v 1 -y /var/losslesscut/waveforms/df1eef35-f669-4441-a05b-80d88afa5f0a.png"}
{"level":"error","ts":1764646070.407107,"caller":"ffmpeg/executor.go:114","msg":"FFmpeg execution failed","error":"exit status 234","stderr":"Error binding filtergraph inputs/outputs: Invalid argument","stacktrace":"github.com/mifi/lossless-cut/backend/internal/ffmpeg.(*Executor).Execute\n\t/root/losslesscut-web/backend/internal/ffmpeg/executor.go:114\ngithub.com/mifi/lossless-cut/backend/internal/ffmpeg.(*Executor).GenerateWaveform\n\t/root/losslesscut-web/backend/internal/ffmpeg/executor.go:319\ngithub.com/mifi/lossless-cut/backend/internal/services.(*VideoService).GenerateWaveform\n\t/root/losslesscut-web/backend/internal/services/video_service.go:106\ngithub.com/mifi/lossless-cut/backend/internal/api/handlers.(*VideoHandler).Waveform\n\t/root/losslesscut-web/backend/internal/api/handlers/video.go:312\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/root/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/mifi/lossless-cut/backend/internal/api.NewRouter.Logger.func5\n\t/root/losslesscut-web/backend/internal/api/middleware/logger.go:16\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/root/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/root/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/root/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/root/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/root/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/lib/go-1.24/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/usr/lib/go-1.24/src/net/http/server.go:2102"}
{"level":"error","ts":1764646070.407313,"caller":"handlers/video.go:314","msg":"Failed to generate waveform","error":"ffmpeg failed: Error binding filtergraph inputs/outputs: Invalid argument","stacktrace":"github.com/mifi/lossless-cut/backend/internal/api/handlers.(*VideoHandler).Waveform\n\t/root/losslesscut-web/backend/internal/api/handlers/video.go:314\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/root/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/mifi/lossless-cut/backend/internal/api.NewRouter.Logger.func5\n\t/root/losslesscut-web/backend/internal/api/middleware/logger.go:16\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/root/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/root/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/root/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/root/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/root/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/lib/go-1.24/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/usr/lib/go-1.24/src/net/http/server.go:2102"}
{"level":"info","ts":1764646070.4073665,"caller":"middleware/logger.go:21","msg":"HTTP request","method":"GET","path":"/api/videos/df1eef35-f669-4441-a05b-80d88afa5f0a/waveform","query":"","status":500,"latency":0.065952088,"ip":"38.224.245.23"}
{"level":"info","ts":1764646070.58802,"caller":"middleware/logger.go:21","msg":"HTTP request","method":"GET","path":"/api/videos/df1eef35-f669-4441-a05b-80d88afa5f0a/stream","query":"","status":206,"latency":0.434029387,"ip":"38.224.245.23"}
{"level":"info","ts":1764646076.1146617,"caller":"middleware/logger.go:21","msg":"HTTP request","method":"GET","path":"/api/videos/df1eef35-f669-4441-a05b-80d88afa5f0a/stream","query":"","status":206,"latency":0.288867364,"ip":"38.224.245.23"}
{"level":"info","ts":1764646076.9088798,"caller":"middleware/logger.go:21","msg":"HTTP request","method":"GET","path":"/api/videos/df1eef35-f669-4441-a05b-80d88afa5f0a/stream","query":"","status":206,"latency":0.746978798,"ip":"38.224.245.23"}
{"level":"info","ts":1764646081.3854053,"caller":"middleware/logger.go:21","msg":"HTTP request","method":"GET","path":"/api/videos/df1eef35-f669-4441-a05b-80d88afa5f0a/stream","query":"","status":206,"latency":1.077609843,"ip":"38.224.245.23"}
{"level":"info","ts":1764646085.7330768,"caller":"handlers/system.go:175","msg":"Session ended, triggering cleanup","sessionId":"sess_p7kxibmvf_1764646029731"}
{"level":"info","ts":1764646085.7331476,"caller":"storage/manager.go:317","msg":"Starting complete cleanup of all data"}
{"level":"info","ts":1764646085.733614,"caller":"middleware/logger.go:21","msg":"HTTP request","method":"POST","path":"/api/system/session/end","query":"","status":200,"latency":0.000065769,"ip":"38.224.245.23"}
{"level":"info","ts":1764646085.7351193,"caller":"storage/manager.go:136","msg":"Reset video counter to 1"}
{"level":"info","ts":1764646085.735138,"caller":"storage/manager.go:376","msg":"Complete cleanup finished"}
{"level":"info","ts":1764646085.7351584,"caller":"middleware/logger.go:21","msg":"HTTP request","method":"POST","path":"/api/system/session/end","query":"","status":200,"latency":0.002138643,"ip":"38.224.245.23"}
